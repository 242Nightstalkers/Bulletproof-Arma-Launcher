#:kivy 1.4

# <Widget>:
#     canvas.after:
#         Color:
#             rgb: 0,1,0
#         Line:
#             rectangle: self.x+1,self.y+1,self.width-1,self.height-1
#             dash_offset: 5
#             dash_length: 3


<HoverButton>
    border: 1,1,1,1
    size_hint_x: None
    size_hint_y: None
    width: 100
    background_normal: app.resource_path('images/borderimage.png')
    background_down: app.resource_path('images/borderimage.png')
    background_hover: app.resource_path('images/borderimage-hover.png')

<MainWidget>
    id: main_widget
    size: 1000, 1000
    Image:
        source: app.resource_path('images/back.png')
        size: root.width, root.height
        pos: root.x, root.y

    Image:

        source: app.resource_path('images/logo.png')
        height: 300
        width: 500
        pos: root.x + 22, 410
        size_hint_x: None
        size_hint_y: None

    BoxLayout:
        id: main_box
        size: root.width, root.height
        pos: root.x, root.y
        orientation: 'vertical'
        padding: 20
        spacing: 12
        StackLayout:
            size_hint_y: None
            orientation: 'rl-tb'
            spacing: 10

            HoverButton:
                on_release: app.root.ids.main_screen_manager.current = 'pref_screen'
                Image:
                    source: app.resource_path('images/button-hammer.png')
                    allow_stretch: False
                    pos: self.parent.pos
            HoverButton:
                on_release: root.controller.on_testpopupbutton_release(self)
                Image:
                    id: testpopupbutton
                    source: app.resource_path('images/button-com.png')
                    allow_stretch: False
                    pos: self.parent.pos
            HoverButton:
                on_release: app.root.ids.main_screen_manager.current = 'install_screen'
                Image:
                    source: app.resource_path('images/button-intel.png')
                    allow_stretch: False
                    pos: self.parent.pos

        Label:
            height: 10
            size_hint_y: None
            canvas:
                Line:
                    points: [self.x + 5, self.y, self.x + self.width - 4.5, self.y]
                    width: 3
                    cap: 'square'

        MainScreenManager:
            id: main_screen_manager
            InstallScreen:
            PrefScreen:

<InstallScreen>:
    name: 'install_screen'



    BoxLayout:
        orientation: 'vertical'

        Label:
            id: filler

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 20

            StatusImage:
                id: status_image
                source: app.resource_path('images/ajax-loader2_20x20.gif')
                width: 20
                size_hint_x: None
                hidden: True

            Label:
                id: status_label
                text: 'test'
                text_size: self.width - 20, self.height
                size_hint: (1, 1)

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 20

            ProgressBar:
                id: progress_bar
                value: 0
                height: 20

        StackLayout:
            id: bullet_stack
            size_hint_y: None
            Image:
                size_hint_x: None
                width: 500
                source: app.resource_path('images/gun.png')

        BoxLayout:
            orientation: 'horizontal'
            height: 100
            size_hint_y: None

            HoverButton:
                id: install_button
                disabled: True
                width: 300
                on_release: root.controller.on_install_button_release(self)
                text: 'Install'
                font_name: app.resource_path("fonts/Xolonium-Regular.ttf")
                font_size: 30
                text_size: self.width - 20, None
                halign: 'left'

            BoxLayout:
                Label:
                    id: footer_label
                    orientation: 'horizontal'
                    font_name: app.resource_path("fonts/Xolonium-Regular.ttf")
                    font_size: 12
                    text_size: self.width, self.height
                    halign: 'right'
                    valign: 'bottom'
                    text: 'Build: N/A'




<PrefScreen>:
    name: 'pref_screen'

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 60
            Label:
                text: 'Launcher Directory:'
                text_size: self.width, self.height
                halign: 'left'
                width: 200
                size_hint_x: None

            TextInput:
                id: path_text_input
                text: 'some/path/to/the/launcher/dir'
                multiline: False
                background_color: 0.3, 0.3, 0.3, 0.7
                foreground_color: 0.9, 0.9, 0.9, 1
                text_size: self.width, self.height
                font_size: 20
                height: 40
                width: 400
                size_hint: None, None

            Button:
                size_hint: None, None
                height: 40
                text: 'Choose Path'
                on_release: root.controller.on_choose_path_button_release(self)

        Label:
            text: 'In Beta, this will be a place for Settings'
